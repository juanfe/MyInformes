% Template:     Informe/Reporte LaTeX
% Documento:    Configuración inicial del template
% Versión:      6.0.3 (27/10/2018)
% Codificación: UTF-8
%
% Autor: Pablo Pizarro R. @ppizarror
%        Facultad de Ciencias Físicas y Matemáticas
%        Universidad de Chile
%        pablo.pizarro@ing.uchile.cl, ppizarror.com
%
% Manual template: [https://latex.ppizarror.com/Template-Informe/]
% Licencia MIT:    [https://opensource.org/licenses/MIT/]

% -----------------------------------------------------------------------------
% Se revisa si las variables no han sido borradas
% -----------------------------------------------------------------------------
\checkvardefined{\autordeldocumento}
\checkvardefined{\codigodelcurso}
\checkvardefined{\departamentouniversidad}
\checkvardefined{\localizacionuniversidad}
\checkvardefined{\nombredelcurso}
\checkvardefined{\nombrefacultad}
\checkvardefined{\nombreuniversidad}
\checkvardefined{\temaatratar}
\checkvardefined{\titulodelinforme}

% -----------------------------------------------------------------------------
% Se añade \xspace a las variables
% -----------------------------------------------------------------------------
\makeatletter
	\g@addto@macro\autordeldocumento\xspace
	\g@addto@macro\codigodelcurso\xspace
	\g@addto@macro\departamentouniversidad\xspace
	\g@addto@macro\localizacionuniversidad\xspace
	\g@addto@macro\nombredelcurso\xspace
	\g@addto@macro\nombrefacultad\xspace
	\g@addto@macro\nombreuniversidad\xspace
	\g@addto@macro\temaatratar\xspace
	\g@addto@macro\titulodelinforme\xspace
\makeatother

% -----------------------------------------------------------------------------
% Se crean variables si se borraron
% -----------------------------------------------------------------------------
\ifthenelse{\isundefined{\tablaintegrantes}}{
	\errmessage{LaTeX Warning: Se borro la variable \noexpand\tablaintegrantes, creando una vacia}
	\def\tablaintegrantes {}}{
}

% -----------------------------------------------------------------------------
% Se activan números en menú marcadores del pdf
% -----------------------------------------------------------------------------
\ifthenelse{\equal{\cfgpdfsecnumbookmarks}{true}}{
	\bookmarksetup{numbered}}{
}

% -----------------------------------------------------------------------------
% Se define metadata del pdf
% -----------------------------------------------------------------------------
\ifthenelse{\equal{\cfgshowbookmarkmenu}{true}}{
	\def\cdfpagemodepdf {UseOutlines}
	}{
	\def\cdfpagemodepdf {UseNone}
}
\hypersetup{
	bookmarksopen={\cfgpdfbookmarkopen},
	bookmarksopenlevel={\cfgbookmarksopenlevel},
	bookmarkstype={toc},
	pdfauthor={\autordeldocumento},
	pdfcenterwindow={\cfgpdfcenterwindow},
	pdfcopyright={\cfgpdfcopyright},
	pdfcreator={LaTeX},
	pdfdisplaydoctitle={\cfgpdfdisplaydoctitle},
	pdffitwindow={\cfgpdffitwindow},
	pdfinfo={
		Curso.Codigo={\codigodelcurso},
		Curso.Nombre={\nombredelcurso},
		Documento.Autor={\autordeldocumento},
		Documento.Tema={\temaatratar},
		Documento.Titulo={\titulodelinforme},
		Template.Autor.Alias={ppizarror},
		Template.Autor.Email={pablo.pizarro@ing.uchile.cl},
		Template.Autor.Nombre={Pablo Pizarro R.},
		Template.Autor.Web={https://ppizarror.com/},
		Template.Codificacion={UTF-8},
		Template.Fecha={27/10/2018},
		Template.Latex.Compilador={pdflatex},
		Template.Licencia.Tipo={MIT},
		Template.Licencia.Web={https://opensource.org/licenses/MIT/},
		Template.Nombre={Template-Informe},
		Template.Tipo={Normal},
		Template.Version.Dev={6.0.3-N},
		Template.Version.Hash={144042D3363282B8122452066C2EF79D},
		Template.Version.Release={6.0.3},
		Template.Web.Dev={https://github.com/Template-Latex/Template-Informe/},
		Template.Web.Manual={https://latex.ppizarror.com/Template-Informe/},
		Universidad.Departamento={\departamentouniversidad},
		Universidad.Nombre={\nombreuniversidad},
		Universidad.Ubicacion={\localizacionuniversidad}
	},
	pdfkeywords={\codigodelcurso, \nombredelcurso, \nombreuniversidad, \localizacionuniversidad},
	pdflang={\documentlang},
	pdfmenubar={\cfgpdfmenubar},
	pdfpagelayout={\cfgpdfpagemode},
	pdfpagemode={\cdfpagemodepdf},
	pdfproducer={Template-Informe v6.0.3 | (Pablo Pizarro R.) ppizarror.com},
	pdfremotestartview={Fit},
	pdfstartpage={1},
	pdfstartview={\cfgpdfpageview},
	pdfsubject={\temaatratar},
	pdftitle={\titulodelinforme},
	pdftoolbar={\cfgpdftoolbar},
	pdfview={\cfgpdfpageview}
}

% -----------------------------------------------------------------------------
% Establece la carpeta de imágenes por defecto
% -----------------------------------------------------------------------------
\graphicspath{{./\defaultimagefolder}}

% -----------------------------------------------------------------------------
% Definición de valores e dimensiones
% -----------------------------------------------------------------------------
\newcounter{templatepagecounter} % Administra números de páginas
\renewcommand{\baselinestretch}{\defaultinterline} % Ajuste del entrelineado
\setlength{\headheight}{64 pt} % Tamaño de la cabecera sin fancyhdr
\setcounter{MaxMatrixCols}{20} % Número máximo de columnas en matrices
\setlength{\footnotemargin}{4 mm} % Margen del footnote
\setlength{\columnsep}{\columnsepwidth em} % Separación entre columnas
\ifthenelse{\equal{\showlinenumbers}{true}}{
	\setlength{\linenumbersep}{0.22cm}
	\renewcommand\linenumberfont{\normalfont\tiny\color{\linenumbercolor}}
	}{
}

% -----------------------------------------------------------------------------
% Definicion de anchos por estilo
% -----------------------------------------------------------------------------
\ifthenelse{\equal{\objectmarginstyle}{small}}{
	\def\marginalignbottom {-0.6} % Margen inferior ecuaciones [cm]
	\def\marginaligncaptionbottom {0} % Margen inferior caption ecuación [cm]
	\def\marginaligncaptiontop {-0.6} % Margen superior caption ecuación [cm]
	\def\marginaligntop {-0.6} % Margen superior ecuaciones [cm]
	\def\marginbottomimages {-0.3} % Margen inferior figura [cm]
	\def\marginequationbottom {-0.4} % Margen inferior ecuaciones [cm]
	\def\marginequationcaptionbottom {0.05} % Margen inferior caption ecuación [cm]
	\def\marginequationcaptiontop {-0.65} % Margen superior caption ecuación [cm]
	\def\marginequationtop {-0.25} % Margen superior ecuaciones [cm]
	\def\marginfloatimages {-13.0} % Mrg. sup. fig \insertimageleft/right [pt]
	\def\margingatherbottom {-0.6} % Margen inferior ecuaciones [cm]
	\def\margingathercaptionbottom {0} % Margen inferior caption ecuación [cm]
	\def\margingathercaptiontop {-0.77} % Margen superior caption ecuación [cm]
	\def\margingathertop {-0.6} % Margen superior ecuaciones [cm]
	\def\marginrightmultimage {0.1} % Margen derecho imágenes múltiples [cm]
	\def\margintopimages {-0.2} % Margen superior figura [cm]
}{
\ifthenelse{\equal{\objectmarginstyle}{normal}}{
	\def\marginalignbottom {-0.4} % Margen inferior ecuaciones [cm]
	\def\marginaligncaptionbottom {0.05} % Margen inferior caption ecuación [cm]
	\def\marginaligncaptiontop {-0.6} % Margen superior caption ecuación [cm]
	\def\marginaligntop {-0.4} % Margen superior ecuaciones [cm]
	\def\marginbottomimages {-0.2} % Margen inferior figura [cm]
	\def\marginequationbottom {-0.26} % Margen inferior ecuaciones [cm]
	\def\marginequationcaptionbottom {0.05} % Margen inferior caption ecuación [cm]
	\def\marginequationcaptiontop {-0.65} % Margen superior caption ecuación [cm]
	\def\marginequationtop {-0.1} % Margen superior ecuaciones [cm]
	\def\marginfloatimages {-13.0} % Mrg. sup. fig \insertimageleft/right [pt]
	\def\margingatherbottom {-0.4} % Margen inferior ecuaciones [cm]
	\def\margingathercaptionbottom {0.05} % Margen inferior caption ecuación [cm]
	\def\margingathercaptiontop {-0.77} % Margen superior caption ecuación [cm]
	\def\margingathertop {-0.4} % Margen superior ecuaciones [cm]
	\def\marginrightmultimage {0.1} % Margen derecho imágenes múltiples [cm]
	\def\margintopimages {0.0} % Margen superior figura [cm]
}{
\ifthenelse{\equal{\objectmarginstyle}{large}}{
	\def\marginalignbottom {-0.25} % Margen inferior ecuaciones [cm]
	\def\marginaligncaptionbottom {0.05} % Margen inferior caption ecuación [cm]
	\def\marginaligncaptiontop {-0.55} % Margen superior caption ecuación [cm]
	\def\marginaligntop {-0.25} % Margen superior ecuaciones [cm]
	\def\marginbottomimages {-0.05} % Margen inferior figura [cm]
	\def\marginequationbottom {-0.10} % Margen inferior ecuaciones [cm]
	\def\marginequationcaptionbottom {0.05} % Margen inferior caption ecuación [cm]
	\def\marginequationcaptiontop {-0.55} % Margen superior caption ecuación [cm]
	\def\marginequationtop {0.0} % Margen superior ecuaciones [cm]
	\def\marginfloatimages {-13.0} % Mrg. sup. fig \insertimageleft/right [pt]
	\def\margingatherbottom {-0.25} % Margen inferior ecuaciones [cm]
	\def\margingathercaptionbottom {0.05} % Margen inferior caption ecuación [cm]
	\def\margingathercaptiontop {-0.55} % Margen superior caption ecuación [cm]
	\def\margingathertop {-0.25} % Margen superior ecuaciones [cm]
	\def\marginrightmultimage {0.1} % Margen derecho imágenes múltiples [cm]
	\def\margintopimages {0.2} % Margen superior figura [cm]	
}{
	\throwbadconfig{Estilo margen objeto desconocido}{\objectmarginstyle}{small,normal,large}}}
}

% -----------------------------------------------------------------------------
% Posición inicial de los objetos
% -----------------------------------------------------------------------------
\floatplacement{figure}{\imagedefaultplacement}
\floatplacement{table}{\tabledefaultplacement}
\floatplacement{tikz}{\tikzdefaultplacement}

% -----------------------------------------------------------------------------
% Configuración de los colores
% -----------------------------------------------------------------------------
\color{\maintextcolor} % Color principal
\arrayrulecolor{\tablelinecolor} % Color de las líneas de las tablas
\sethlcolor{\highlightcolor} % Color del subrayado por defecto
\ifthenelse{\equal{\showborderonlinks}{true}}{
	% Color de links con borde
	\hypersetup{
		citebordercolor=\numcitecolor,
		linkbordercolor=\linkcolor,
		urlbordercolor=\urlcolor
	}
}{
	% Color de links sin borde
	\hypersetup{ % No reorganizar
		hidelinks,
		colorlinks=true,
		citecolor=\numcitecolor,
		linkcolor=\linkcolor,
		urlcolor=\urlcolor
	}
}
\ifthenelse{\equal{\colorpage}{white}}{}{
	\pagecolor{\colorpage}
}

% -----------------------------------------------------------------------------
% Configuración de las leyendas
% -----------------------------------------------------------------------------

% Márgenes de las leyendas por defecto
\setcaptionmargincm{\captionlrmargin}
\ifthenelse{\equal{\captiontextbold}{true}}{ % Texto en negrita en etiquetas
	\renewcommand{\captiontextbold}{bf}}{
	\renewcommand{\captiontextbold}{}
}

% Se configura el texto de los caption
\captionsetup{
	labelfont={color=\captioncolor, \captiontextbold},
	textfont={color=\captiontextcolor},
	singlelinecheck=on
}

% Configuración de márgenes en las figuras
\floatsetup[figure]{
	captionskip=\captiontbmarginfigure pt
}

% Configuración de márgenes en las tablas
\floatsetup[table]{
	captionskip=\captiontbmargintable pt
}

% Caption superior en figuras
\ifthenelse{\equal{\figurecaptiontop}{true}}{
	\floatsetup[figure]{position=above}}{
}

% Caption superior en tablas
\ifthenelse{\equal{\tablecaptiontop}{true}}{
	\floatsetup[table]{position=top}
	}{
	\floatsetup[table]{position=bottom}
}

% Alineado de leyendas
\ifthenelse{\equal{\captionalignment}{justified}}{ % Leyenda justificada
	\captionsetup{
		format=plain,
		justification=justified
	}
}{
\ifthenelse{\equal{\captionalignment}{centered}}{ % Leyenda centrada
	\captionsetup{
		justification=centering
	}
}{
\ifthenelse{\equal{\captionalignment}{left}}{ % Leyenda alineada a la izquierda
	\captionsetup{
		justification=raggedright,
		singlelinecheck=false
	}
}{
\ifthenelse{\equal{\captionalignment}{right}}{ % Leyenda alineada a la derecha
	\captionsetup{
		justification=raggedleft,
		singlelinecheck=false
	}
}{
	\throwbadconfig{Posicion de leyendas desconocida}{\captionalignment}{justified,centered,left,right}}}}
}

% -----------------------------------------------------------------------------
% Configuración de referencias y citas
% -----------------------------------------------------------------------------
\ifthenelse{\equal{\stylecitereferences}{natbib}}{
	\bibliographystyle{\natbibrefstyle}
	\setlength{\bibsep}{\natbibrefsep pt}
}{
\ifthenelse{\equal{\stylecitereferences}{apacite}}{
	\bibliographystyle{apacite}
	\setlength{\bibitemsep}{\apaciterefsep pt}
}{
\ifthenelse{\equal{\stylecitereferences}{bibtex}}{
	\bibliographystyle{apa}
	\newlength{\bibitemsep}
	\setlength{\bibitemsep}{.2\baselineskip plus .05\baselineskip minus .05\baselineskip}
	\newlength{\bibparskip}\setlength{\bibparskip}{0pt}
	\let\oldthebibliography\thebibliography
	\renewcommand\thebibliography[1]{
		\oldthebibliography{#1}
		\setlength{\parskip}{\bibitemsep}
		\setlength{\itemsep}{\bibparskip}
	}
	\setlength{\bibitemsep}{\bibtexrefsep pt}
}{
	\throwbadconfig{Estilo citas desconocido}{\stylecitereferences}{bibtex,apacite,natbib}}}
}
\makeatletter
\ifthenelse{\equal{\twocolumnreferences}{true}}{ % Referencias en 2 columnas
	\renewenvironment{thebibliography}[1]
	{\begin{multicols}{2}[\section*{\refname}]
		\@mkboth{\MakeUppercase\refname}{\MakeUppercase\refname}
		\list{\@biblabel{\@arabic\c@enumiv}}
		{\settowidth\labelwidth{\@biblabel{#1}}
			\leftmargin\labelwidth
			\advance\leftmargin\labelsep
			\@openbib@code
			\usecounter{enumiv}
			\let\p@enumiv\@empty
			\renewcommand\theenumiv{\@arabic\c@enumiv}}
		\sloppy
		\clubpenalty 4000
		\@clubpenalty \clubpenalty
		\widowpenalty 4000
		\sfcode`\.\@m}
		{\def\@noitemerr
		{\@latex@warning{Ambiente `thebibliography' no definido}}
		\endlist\end{multicols}}}{}
\makeatother

% -----------------------------------------------------------------------------
% Configuración anexo
% -----------------------------------------------------------------------------
\patchcmd{\appendices}{\quad}{\sectionappendixlastchar\quad}{}{}

% -----------------------------------------------------------------------------
% Se añade listings (código fuente) a tocloft
% -----------------------------------------------------------------------------
\begingroup
	\makeatletter
	\let\newcounter\@gobble\let\setcounter\@gobbletwo
	\globaldefs\@ne\let\c@loldepth\@ne
	\newlistof{listings}{lol}{\lstlistlistingname}
	\newlistentry{lstlisting}{lol}{0}
	\makeatother
\endgroup

% -----------------------------------------------------------------------------
% Reconfiguración de tamaño de páginas
% -----------------------------------------------------------------------------
\makeatletter
	\def\ifGm@preamble#1{\@firstofone}
	\appto\restoregeometry{
		\pdfpagewidth=\paperwidth
		\pdfpageheight=\paperheight}
	\apptocmd\newgeometry{
		\pdfpagewidth=\paperwidth
		\pdfpageheight=\paperheight}{}{}
\makeatother

% -----------------------------------------------------------------------------
% Configuración de hbox y vbox
% -----------------------------------------------------------------------------
\hfuzz=200pt
\vfuzz=200pt
\hbadness=\maxdimen
\vbadness=\maxdimen

% -----------------------------------------------------------------------------
% Se activa el modo estricto de revisión de números de página
% -----------------------------------------------------------------------------
\strictpagecheck

% -----------------------------------------------------------------------------
% Actualización márgen títulos
% -----------------------------------------------------------------------------
\titlespacing{\section}{0pt}{20pt}{10pt}
\titlespacing{\subsection}{0pt}{15pt}{10pt}

% -----------------------------------------------------------------------------
% Se activa el word-wrap para textos con \texttt{}
% -----------------------------------------------------------------------------
\ttfamily \hyphenchar\the\font=`\-

% -----------------------------------------------------------------------------
% Se define el tipo de texto de los url
% -----------------------------------------------------------------------------
\urlstyle{tt}

% -----------------------------------------------------------------------------
% Se revisa si se importa tikz
% -----------------------------------------------------------------------------
\ifthenelse{\equal{\portraitstyle}{style16}}{\coreimporttikz}{}
\ifthenelse{\equal{\portraitstyle}{\bgtemplatetestcode}}{\coreimporttikz}{}

% -----------------------------------------------------------------------------
% Se define la versión menor a compilar
% -----------------------------------------------------------------------------
\pdfminorversion=\pdfcompileversion

% -----------------------------------------------------------------------------
% Profundidad de las secciones
% -----------------------------------------------------------------------------
\setcounter{secnumdepth}{4} % Límite máximo subsubsubsección

% -----------------------------------------------------------------------------
% Crea las subsubsubsecciones
% -----------------------------------------------------------------------------
\newcounter{subsubsubsection}[subsubsection]
\titleclass{\subsubsubsection}{straight}[\subsection]

% -----------------------------------------------------------------------------
% Establece el número de las subsubsubsecciones
% -----------------------------------------------------------------------------
\ifthenelse{\equal{\showdotontitles}{true}}{ % Agrega punto tras el número
	\renewcommand{\thesubsubsubsection}{\thesubsubsection.\arabic{subsubsubsection}.}
	\renewcommand{\theparagraph}{\thesubsubsubsection.\arabic{paragraph}.}
}{
	\renewcommand{\thesubsubsubsection}{\thesubsubsection.\arabic{subsubsubsection}}
	\renewcommand{\theparagraph}{\thesubsubsubsection.\arabic{paragraph}}
}

% -----------------------------------------------------------------------------
% Agrega compatibilidad de subsubsubsecciones al TOC
% -----------------------------------------------------------------------------
\makeatletter
	\renewcommand\paragraph{\@startsection{paragraph}{5}{\z@}
		{3.25ex \@plus 1ex \@minus .2ex}
		{-1em}
		{\normalfont\normalsize\bfseries}}
	\renewcommand\subparagraph{\@startsection{subparagraph}{6}{\parindent}
		{3.25ex \@plus 1ex \@minus .2ex}
		{-1em}
		{\normalfont\normalsize\bfseries}}
	\def\toclevel@subsubsubsection{4}
	\def\toclevel@paragraph{5}
	\def\toclevel@paragraph{6}
	\def\l@subsubsubsection{\@dottedtocline{4}{7em}{4em}}
	\def\l@paragraph{\@dottedtocline{5}{10em}{5em}}
	\def\l@subparagraph{\@dottedtocline{6}{14em}{6em}}
\makeatother

% -----------------------------------------------------------------------------
% Profundidad del índice y bookmarks pdf
% -----------------------------------------------------------------------------
\setcounter{tocdepth}{\indexdepth}

% END